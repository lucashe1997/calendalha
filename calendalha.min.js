function calendalha(target,options){(options=options||[]).textAlign=options.textAlign||"center",options.onDayClick=options.onDayClick||function(){},options.selectDayOnClick=options.selectDayOnClick||!1,options.onMonthChange=options.onMonthChange||function(){},options.locale=options.locale||"",options.initDate=options.initDate||moment().format("YYYY-MM-DD"),options.markedDates=options.markedDates||[],options.initDayActive=options.initDayActive||!1,options.renderCustomDay=options.renderCustomDay||!1,options.celVAlign=options.celVAlign||"top",options.custLeftArrow=options.custLeftArrow||"&lt;&lt;",options.custRightArrow=options.custRightArrow||"&gt;&gt;",options.weekFormat=options.weekFormat||"ddd",options.monthFormat=options.monthFormat||"MMMM",currentDay=moment().format("DD"),currentMonth=moment().format("MM"),currentYear=moment().format("YYYY"),options.initDate=moment(options.initDate),moment.locale(options.locale);var targetEl=document.querySelector(target),monthChange=0,storedDay,storedMonth,storedYear,actualMonth,actualYear;function staticContent(){function appendMarkup(){var str=`<div class="calendalha-control" style="-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none; "><span class="prev">${options.custLeftArrow}</span><div><span class="month"></span>&nbsp;<span class="year"></span></div><span class="next">${options.custRightArrow}</span></caption></div>`;str+=`<table class="calendalha-body" style="-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none; text-align:${options.textAlign}"><thead><tr></tr></thead><tbody></tbody></table>`,targetEl.innerHTML+=str}function tableHead(){var th="";for(i=0;i<=6;i++)th+="<th>"+moment().isoWeekday(i).format(options.weekFormat)+"</th>";targetEl.querySelector("table thead tr").innerHTML+=th}appendMarkup(),tableHead()}function dynamicContent(change,activeDay){function appendHeadline(month,year){actualMonth=month,actualYear=year,month=moment(month,"MM").format(options.monthFormat),targetEl.querySelector(".calendalha-control .month").textContent=month,targetEl.querySelector(".calendalha-control .year").textContent=year}function appendDays(month,year,push){var appendStr="",value;for(theFirst=parseInt(moment(month+"-01-"+year,"MM-DD-YYYY").format("e"),10),index=1,push=index-theFirst,daysInMonth=moment(calendarMonth+"-"+calendarYear,"MM-YYYY").daysInMonth(),x=0,i=push;i<=daysInMonth;i++){value=moment(year+"-"+month+"-"+i,"YYYY-MM-D").format("YYYY-MM-DD"),x++;var string=i;!1!==options.renderCustomDay&&(string=options.renderCustomDay(i,moment(year+"-"+month+"-"+i,"YYYY-MM-D"))),1===x?i>0?appendStr+=`<tr valign="${options.celVAlign}"><td data-value="${value}">${string}</td>`:appendStr+=`<tr valign="${options.celVAlign}"><td disabled></td>`:7===x?(appendStr+=`<td valign="${options.celVAlign}" data-value="${value}">${string}</td></tr>`,x=0):i>0?appendStr+=`<td valign="${options.celVAlign}" data-value="${value}">${string}</td>`:appendStr+=`<td valign="${options.celVAlign}" disabled></td>`}if(0!==x)for(i=1;i<=7-x;i++)appendStr+="<td disabled></td>";appendStr+="</tr>",targetEl.querySelector("table tbody tr")&&targetEl.querySelector("table tbody tr").remove(),targetEl.querySelector("table tbody").innerHTML=appendStr}activeDay=activeDay||null,monthChange+=change=change||0,newDate=moment(options.initDate).add(monthChange,"months"),calendarMonth=newDate.format("MM"),calendarYear=newDate.format("YYYY"),this.styleDays=function(){storedMonth==calendarMonth&&storedYear==calendarYear?activeMonth=1:activeMonth=0,targetEl.querySelectorAll("table tbody td").forEach((function(el){calendarDate=parseInt(el.textContent,10),calendarDate<1&&(el.innerHTML=""),calendarDate==currentDay&&calendarMonth==currentMonth&&calendarYear==currentYear&&el.classList.add("currentDay"),options.initDate.format("YYYYMMDD")==calendarYear+calendarMonth+calendarDate&&options.initDayActive&&el.classList.add("active"),1==activeMonth&&storedDay==calendarDate&&el.classList.add("active"),options.markedDates.includes(el.getAttribute("data-value"))&&el.classList.add("marked")}))},null===activeDay?(appendHeadline(calendarMonth,calendarYear),appendDays(calendarMonth,calendarYear),this.styleDays()):(storedDay=activeDay,storedMonth=calendarMonth,storedYear=calendarYear,targetEl.querySelectorAll("tbody td").forEach((function(el){tdDays=el.textContent,activeDay==tdDays&&options.selectDayOnClick?el.classList.add("active"):el.classList.remove("active")})))}staticContent(),dynamicContent(),options.onMonthChange(actualMonth,actualYear),targetEl.querySelector(".prev").addEventListener("click",(function(e){dynamicContent(-1),options.onMonthChange(actualMonth,actualYear)})),targetEl.querySelector(".next").addEventListener("click",(function(e){dynamicContent(1),options.onMonthChange(actualMonth,actualYear)})),targetEl.querySelector("table tbody").addEventListener("click",(function(event){let el=event.target;"td"!=el.tagName&&el.getAttribute("disabled")||(day=el.textContent,options.onDayClick(el.getAttribute("data-value")),dynamicContent(null,day))}))}